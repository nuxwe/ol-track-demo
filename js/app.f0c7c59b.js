(function(t){function e(e){for(var n,r,s=e[0],c=e[1],h=e[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,h||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,s=1;s<o.length;s++){var c=o[s];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},i={app:0},a=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"485b":function(t,e){t.exports="data:image/png;base64,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"},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("Map")],1)},a=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{attrs:{id:"map"}}),o("div",{staticClass:"btnGroup"},[o("button",{on:{click:function(e){return t.setSpeed(500)}}},[t._v("加速")]),o("button",{on:{click:function(e){return t.setSpeed(100)}}},[t._v("减速")]),o("button",{on:{click:t.startAnimation}},[t._v("运动")]),o("button",{on:{click:t.stopAnimation}},[t._v("停止")]),o("button",{on:{click:t.moveStart}},[t._v("回到起点")]),o("button",{on:{click:t.addPopup}},[t._v("添加弹窗")]),o("button",[t._v("截止"+t._s(t.datalist[t.datalist.length-1])+",已被下载"+t._s(t.olrank)+"次")])])])},s=[],c=(o("d81d"),o("b64b"),o("5bc0"),o("5eee")),h=o("a2c7"),u=o("2ef1"),l=o("480c"),d=o("d4ec"),g=o("bee2"),p=(o("d9e2"),o("a9e3"),o("4cdf")),m=o("3e6b"),A=o("2ce2"),f=o("0710"),C=o("5831"),v=o("7a09"),w=o("f403"),y=o("6c77"),b=o("8682"),k=o("6cbf"),B=o("ce2c"),G=o("83a6"),D=o("834d"),M=o("485b"),Q=o.n(M),F=o("c4f2"),j=o.n(F),U=function(){function t(e){if(Object(d["a"])(this,t),!e.map)throw new Error("请传入地图对象！");this.map=e.map,this.speedInput=e.speed||100,this.routeCoords=e.routeCoords||[],this.lineColor=e.lineColor||"red",this.lineWidth=e.lineWidth||6,this.moveType=e.moveType||"back",this.moveImage=e.moveImage||"./fly.png",this.route,this.styles,this.vectorLayer,this.routeFeature,this.startMarker,this.endMarker,this.position,this.geoMarker,this.distance=0,this.lastTime,this.lastCoords,this.movefn,this.animating=!1,this.selectSingleClick,this.initMA()}return Object(g["a"])(t,[{key:"initMA",value:function(){var t=this;if(!this.routeCoords.length)return!1;this.styles={route:new y["c"]({stroke:new b["a"]({width:this.lineWidth,color:this.lineColor})}),home:new y["c"]({image:new k["a"]({anchor:[.5,1],src:j.a,scale:.2})}),geoMarker:new y["c"]({image:new k["a"]({anchor:[.5,.5],src:Q.a,scale:.1})}),icon:new y["c"]({image:new B["a"]({radius:7,fill:new G["a"]({color:"white"}),stroke:new b["a"]({color:"blue",width:2})})})};var e=[];e=Array.isArray(this.routeCoords[0])?this.routeCoords:this.routeCoords.map((function(t){return[t.lat||t.latitude,t.lon||t.longitude]})),this.route=new v["a"](e);var o=this.route.getCoordinates();this.routeFeature=new p["a"]({type:"route",geometry:this.route});var n=o.map((function(e,o){return new p["a"]({type:"icon",geometry:new w["a"](e),typenem:t.routeCoords[o]})}));this.position=n[0].getGeometry().clone(),this.geoMarker=new p["a"]({type:"geoMarker",geometry:this.position}),n.push(this.routeFeature),n.push(this.geoMarker),this.vectorLayer=new m["a"]({source:new C["a"]({features:n}),style:function(e){return t.styles[e.get("type")]}}),this.map.addLayer(this.vectorLayer)}},{key:"moveFeature",value:function(t){var e=Number(this.speedInput),o=t.frameState.time,n=o-this.lastTime;this.distance=(this.distance+e*n/1e6)%2,this.lastTime=o;var i=this.route.getCoordinateAt(this.distance>1?2-this.distance:this.distance);if(this.distance>1.001&&("cycle"===this.moveType&&(this.distance=0),"once"===this.moveType))return this.stopAnimation(),this.distance=0,!1;if(this.lastCoords){var a=this.lastCoords[0]-i[0],r=this.lastCoords[1]-i[1],s=Math.atan2(r,a);this.styles.geoMarker.getImage().setRotation(-s)}this.lastCoords=i,this.position.setCoordinates(i);var c=Object(D["a"])(t);c.setStyle(this.styles.geoMarker),c.drawGeometry(this.position),this.map.render()}},{key:"startAnimation",value:function(){this.animating?console.log("车辆已经处于运动状态"):(this.lastTime=Date.now(),this.movefn=this.moveFeature.bind(this),this.vectorLayer.on("postrender",this.movefn),this.geoMarker.setGeometry(null),this.animating=!this.animating)}},{key:"stopAnimation",value:function(){this.animating?(this.geoMarker.setGeometry(this.position),this.vectorLayer.un("postrender",this.movefn),this.animating=!this.animating):console.log("车辆已经处于停止状态")}},{key:"setSpeed",value:function(t){this.speedInput=Number(t)}},{key:"setNewRoute",value:function(t){this.routeCoords=t,this.moveStart()}},{key:"moveStart",value:function(){this.map.removeLayer(this.vectorLayer),this.distance=0,this.animating=!1,this.initMA()}},{key:"getClickFeature",value:function(t){this.selectSingleClick||(this.selectSingleClick=new A["a"],this.map.addInteraction(this.selectSingleClick)),this.selectSingleClick.on("select",(function(e){e.selected.length&&e.selected[0].get("typenem")&&t(e.selected[0].get("typenem"))}))}},{key:"addPopup",value:function(t,e){var o=document.createElement("div");o.className="popup",o.insertAdjacentHTML("beforeend",t.el);var n=new f["a"]({position:t.position,element:o,offset:t.offset});this.map.addOverlay(n),document.querySelector(".".concat(t.btn)).addEventListener("click",(function(){e(n)}))}}]),t}(),Y=U,I=o("bc3a"),R=o.n(I),V=o("5a0c"),E={name:"Map",data:function(){return{map:"",oltrack:"",center:[116.406138,39.933425],olrank:0,datalist:[]}},mounted:function(){this.map=new c["a"]({target:document.getElementById("map"),view:new h["a"]({center:this.center,zoom:13,minZoom:2,maxZoom:19,projection:"EPSG:4326"}),layers:[new l["a"]({source:new u["a"]({url:"http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}",tileSize:512})})]}),this.oltrack=new Y({map:this.map,routeCoords:[[116.406138,39.933425],[116.372924,39.932457],[116.32915,39.931799],[116.290698,39.925217],[116.351295,39.866479],[116.374473,39.870224],[116.374614,39.889345]]}),this.oltrack.getClickFeature((function(t){alert("点击信息：".concat(t))})),this.getOlrank()},methods:{stopAnimation:function(){this.oltrack.stopAnimation()},startAnimation:function(){this.oltrack.startAnimation()},setSpeed:function(t){this.oltrack.setSpeed(t)},moveStart:function(){this.oltrack.moveStart()},addPopup:function(){var t=this;this.oltrack.addPopup({el:'<span class="close">点我关闭弹窗</span>',btn:"close",position:[116.372924,39.932457]},(function(e){t.map.removeOverlay(e)}))},getOlrank:function(){var t=this;R()({method:"get",url:"https://npm-stat.com/api/download-counts?package=ol-track&from=2022-03-01&until=".concat(V().format("YYYY-MM-DD"))}).then((function(e){t.datalist=Object.keys(e.data["ol-track"]);var o=e.data["ol-track"];for(var n in o)t.olrank+=o[n]}))}}},O=E,S=(o("8a55"),o("2877")),W=Object(S["a"])(O,r,s,!1,null,"0034e6e6",null),x=W.exports,H={name:"App",components:{Map:x}},P=H,T=(o("034f"),Object(S["a"])(P,i,a,!1,null,null,null)),K=T.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(K)}}).$mount("#app")},"85ec":function(t,e,o){},"8a55":function(t,e,o){"use strict";o("bd54")},bd54:function(t,e,o){},c4f2:function(t,e,o){t.exports=o.p+"img/home.45cfdee3.png"}});
//# sourceMappingURL=app.f0c7c59b.js.map