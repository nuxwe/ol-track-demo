(function(t){function e(e){for(var i,a,s=e[0],c=e[1],h=e[2],l=0,g=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&g.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(g.length)g.shift()();return r.push.apply(r,h||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],i=!0,s=1;s<o.length;s++){var c=o[s];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=o[0]))}return t}var i={},n={app:0},r=[];function a(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=i,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(o,i,function(e){return t[e]}.bind(null,i));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var u=c;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},2946:function(t,e,o){"use strict";o("b986")},"485b":function(t,e){t.exports="data:image/png;base64,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"},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("Map")],1)},r=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{attrs:{id:"map"}}),o("div",{staticClass:"btnGroup"},[o("button",{on:{click:t.startAnimation}},[t._v("运动")]),o("button",{on:{click:t.stopAnimation}},[t._v("停止")])])])},s=[],c=(o("d81d"),o("5bc0"),o("5eee")),h=o("a2c7"),u=o("2ef1"),l=o("480c"),g=o("d4ec"),p=o("bee2"),d=(o("a9e3"),o("4cdf")),A=o("3e6b"),m=o("2ce2"),C=o("0710"),f=o("5831"),w=o("7a09"),v=o("f403"),y=o("6c77"),b=o("8682"),B=o("6cbf"),G=o("ce2c"),k=o("83a6"),D=o("834d"),Q=o("485b"),M=o.n(Q),F=o("c4f2"),j=o.n(F),U=function(){function t(e){Object(g["a"])(this,t),this.map=e.map,this.speedInput=e.speed||100,this.routeCoords=e.routeCoords||[],this.lineColor=e.lineColor||"red",this.lineWidth=e.lineWidth||6,this.moveType=e.moveType||"back",this.moveImage=e.moveImage||"./fly.png",this.route,this.styles,this.vectorLayer,this.routeFeature,this.startMarker,this.endMarker,this.position,this.geoMarker,this.distance=0,this.lastTime,this.lastCoords,this.movefn,this.animating=!1,this.selectSingleClick,this.initMA()}return Object(p["a"])(t,[{key:"initMA",value:function(){var t=this;if(!this.routeCoords.length)return!1;this.styles={route:new y["c"]({stroke:new b["a"]({width:this.lineWidth,color:this.lineColor})}),home:new y["c"]({image:new B["a"]({anchor:[.5,1],src:j.a,scale:.2})}),geoMarker:new y["c"]({image:new B["a"]({anchor:[.5,.5],src:M.a,scale:.1})}),icon:new y["c"]({image:new G["a"]({radius:7,fill:new k["a"]({color:"white"}),stroke:new b["a"]({color:"blue",width:2})})})};var e=[];if(Array.isArray(this.routeCoords[0]))e=this.routeCoords;else{var o=this.routeCoords.map((function(t){return[t.lat||t.latitude,t.lon||t.longitude]}));o.push(o)}this.route=new w["a"](e);var i=this.route.getCoordinates();this.routeFeature=new d["a"]({type:"route",geometry:this.route});var n=i.map((function(t,o){return new d["a"]({type:"icon",geometry:new v["a"](t),typenem:e[o]})}));this.position=n[0].getGeometry().clone(),this.geoMarker=new d["a"]({type:"geoMarker",geometry:this.position}),n.push(this.routeFeature),n.push(this.geoMarker),this.vectorLayer=new A["a"]({source:new f["a"]({features:n}),style:function(e){return t.styles[e.get("type")]}}),this.map.addLayer(this.vectorLayer)}},{key:"moveFeature",value:function(t){var e=Number(this.speedInput),o=t.frameState.time,i=o-this.lastTime;this.distance=(this.distance+e*i/1e6)%2,this.lastTime=o;var n=this.route.getCoordinateAt(this.distance>1?2-this.distance:this.distance);if(this.distance>1.001&&("cycle"===this.moveType&&(this.distance=0),"once"===this.moveType))return this.stopAnimation(),this.distance=0,!1;if(this.lastCoords){var r=this.lastCoords[0]-n[0],a=this.lastCoords[1]-n[1],s=Math.atan2(a,r);this.styles.geoMarker.getImage().setRotation(-s)}this.lastCoords=n,this.position.setCoordinates(n);var c=Object(D["a"])(t);c.setStyle(this.styles.geoMarker),c.drawGeometry(this.position),this.map.render()}},{key:"startAnimation",value:function(){this.animating?console.log("车辆已经处于运动状态"):(this.lastTime=Date.now(),this.movefn=this.moveFeature.bind(this),this.vectorLayer.on("postrender",this.movefn),this.geoMarker.setGeometry(null),this.animating=!this.animating)}},{key:"stopAnimation",value:function(){this.animating?(this.geoMarker.setGeometry(this.position),this.vectorLayer.un("postrender",this.movefn),this.animating=!this.animating):console.log("车辆已经处于停止状态")}},{key:"setSpeed",value:function(t){this.speedInput=Number(t)}},{key:"setNewRoute",value:function(t){this.routeCoords=t,this.moveStart()}},{key:"moveStart",value:function(){this.map.removeLayer(this.vectorLayer),this.distance=0,this.animating=!1,this.initMA()}},{key:"getClickFeature",value:function(t){this.selectSingleClick||(this.selectSingleClick=new m["a"],this.map.addInteraction(this.selectSingleClick)),this.selectSingleClick.on("select",(function(e){e.selected.length&&e.selected[0].get("typenem")&&t(e.selected[0].get("typenem"))}))}},{key:"addPopup",value:function(t,e){var o=document.createElement("div");o.className="popip",o.insertAdjacentHTML("beforeend",t.el);var i=new C["a"]({position:t.position,element:o,offset:t.offset});this.map.addOverlay(i),document.querySelector(".".concat(t.btn)).addEventListener("click",(function(){e(i)}))}}]),t}(),I=U,R={name:"Map",data:function(){return{map:"",oltrack:"",center:[116.406138,39.933425]}},mounted:function(){this.map=new c["a"]({target:document.getElementById("map"),view:new h["a"]({center:this.center,zoom:13,minZoom:2,maxZoom:19,projection:"EPSG:4326"}),layers:[new l["a"]({source:new u["a"]({url:"http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}",tileSize:512})})]}),this.oltrack=new I({map:this.map,routeCoords:[[116.406138,39.933425],[116.372924,39.932457],[116.32915,39.931799],[116.290698,39.925217],[116.351295,39.866479],[116.374473,39.870224],[116.374614,39.889345]]})},methods:{stopAnimation:function(){this.oltrack.stopAnimation()},startAnimation:function(){this.oltrack.startAnimation()}}},V=R,W=(o("2946"),o("2877")),Y=Object(W["a"])(V,a,s,!1,null,"5cd2614e",null),E=Y.exports,O={name:"App",components:{Map:E}},x=O,S=(o("034f"),Object(W["a"])(x,n,r,!1,null,null,null)),H=S.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(H)}}).$mount("#app")},"85ec":function(t,e,o){},b986:function(t,e,o){},c4f2:function(t,e,o){t.exports=o.p+"img/home.45cfdee3.png"}});
//# sourceMappingURL=app.6a9d51ce.js.map